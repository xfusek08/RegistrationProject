var g_AnouncementManager;$(document).ready(function(){$("body").on("keyup","input[type=text].nval",function(){$(this).addClass("fadeoutcolor");setTimeout(function(){$(this).removeClass("fadeoutcolor")},400)});g_AnouncementManager=new AnnouncementManager;CheckForAlertXML("body")});function DateToStr(a){var c=a.getDate().toString(),b=(a.getMonth()+1).toString();1==c.length&&(c="0"+c);1==b.length&&(b="0"+b);return c+"."+b+"."+a.getFullYear()}function StrToDate(a){a=a.split(".");return new Date(a[2],a[1]-1,a[0])}function SendAjaxRequest(a,c,b){StartLoading();$.ajax({url:location.protocol+"//"+location.host+location.pathname,type:"POST",async:c,data:"ajax=true&"+a,success:function(a){StopLoading();CheckForAlertXML(a);b(a)}})}function SubmitForm(a,c,b){SendAjaxRequest("type="+a+"&"+c.serialize(),!0,b)}function OnClickAjaxSubmit(a,c,b,d){a.preventDefault();a=b.closest("form");$("<input type='hidden'/>").attr("name",b.attr("name")).val(b.val()).appendTo(a);SubmitForm(c,a,d)}function isOdd(a){return a%2}function CheckForAlertXML(a){$(a).find("alert").each(function(){g_AnouncementManager.AddAnouncement($(this).find("color").text(),$(this).find("message").text())})}function RasiceComfirmForm(a,c,b){a='<div class="floatform"><div>'+('<div class="caption">'+a+"</div>")+('<div class="text">'+c+"</div>")+'<div class="buttonline">';a+='<button value="ok">Ok</button>';a+='<button value="stor">Storno</button>';a+="</div>";a+="</div>";a+="</div>";a+="</div>";$(a).appendTo("body");var d=$(".floatform > div");CenterFloatForm(d);d.find('button[value="stor"]').focus();d.on("click","button",function(){"ok"===$(this).attr("value")&&"function"===typeof b&&b();d.parent(".floatform").remove()});d.keydown(function(a){a.stopPropagation();37===a.keyCode&&d.find('button[value="ok"]').is(":focus")?d.find('button[value="stor"]').focus():39===a.keyCode&&d.find('button[value="stor"]').is(":focus")?d.find('button[value="ok"]').focus():13===a.keyCode?d.find("button:focus").click():27===a.keyCode&&d.find('button[value="stor"]').click()})}function CenterFloatForm(a){var c=$(window).height()/2-a.outerHeight()/2;10>c&&(c=10);var b=$(window).width()/2-a.outerWidth()/2;10>b&&(b=10);a.css({marginLeft:b,marginTop:c})}function AnnouncementManager(){this.Anouncements=[];this.ToRaiseCounter=0;this.ClearingInterval;this.ClearingTimeout;this.AddAnouncement=function(a,c){this.Anouncements.push(new Announcement(a,c));var b=this.Anouncements[this.Anouncements.length-1].element;b.appendTo("body");this.ToRaiseCounter++;var d=this,e=this.Anouncements.length;setTimeout(function(){b.animate({top:"-="+b.outerHeight()*e+"px"},150,"swing",d.startClear());d.ToRaiseCounter--},200*d.ToRaiseCounter)};this.startClear=function(){clearInterval(this.ClearingInterval);clearTimeout(this.ClearingTimeout);var a=this;this.ClearingTimeout=setTimeout(function(){a.ClearingInterval=setInterval(function(){for(var c=a.Anouncements.length-1;0<=c;c--){var b=a.Anouncements[c].element;b.animate({top:"+="+b.outerHeight()+"px"},250,"swing",function(){$(this).offset().top>=$(window).outerHeight()&&(b.remove(),a.Anouncements.shift(),0==a.Anouncements.length&&clearInterval(a.ClearingInterval))})}},1500)},3E3)}}function Announcement(a,c,b){var d="rgba(255,255,255,0.85)",e="black";switch(a.toLowerCase()){case "red":d="rgba(255,100,100,0.85)";e="white";break;case "green":d="rgba(100,255,100, 0.85)"}this.element=$('<div class="announcement">'+c+"</div>");this.element.css({top:$(window).outerHeight()+"px",width:$(window).outerWidth()+"px",background:d,color:e});this.index=b}var loagingTimeout,loadingcounter=0;function StartLoading(){0==loadingcounter&&$('<div class="loading"><img src="../img/ajax-loader.gif " /></div>').appendTo(".adm-topheader");loadingcounter++}function StopLoading(){1==loadingcounter&&$(".loading").remove();loadingcounter--}function HighlightAllInvalInputs(a){a.find("input[valid=0]").each(function(){HighlightInvalInput($(this).attr("name"),$(this).attr("message"),a)})}function HighlightInvalInput(a,c,b){null==b&&(b=$("body"));var d=b.find('*[name="'+a+'"]');d.attr("title",c);var e=d.css("backgroundColor");d.animate({backgroundColor:"rgb(255,150,150)",color:"white"},600,function(){d.focusin(function(){UnHighlightInput(d,e)});d.change(function(){UnHighlightInput(d,e)})})}function UnHighlightInput(a,c){a.animate({backgroundColor:c,color:"black"},600,function(){a.removeAttr("title")})}function in_array(a,c){for(var b=0;b<c.length;b++)if(c[b]===a)return!0;return!1}function CreateConfirm(a,c,b,d,e){if(!a.next().hasClass("confirm")){$(".confirm").slideUp(150,function(){$(this).remove()});c='<div class="confirm'+(0<c.length?" "+c:"")+'"><div class="message">'+b+'</div><div class="confirmactions">';for(b=0;b<d.length;b++)c+='<button name="'+(!0===d[b].submit?"ok":"cancel")+'">'+d[b].message+"</button>";var f=$(c+"</div></div>");f.hide();f.insertAfter(a);f.on("click","button",function(a){a.preventDefault();"ok"==$(this).attr("name")&&"function"===typeof e&&e();f.slideUp(150,function(){f.remove()})});f.slideDown(150)}}function CreateDeleteConfirm(a,c,b){var d=[];d.push({submit:!0,message:"Odstranit"});d.push({submit:!1,message:"Zru\u0161it"});CreateConfirm(a,"delete",c,d,b)};