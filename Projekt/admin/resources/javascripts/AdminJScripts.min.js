!function(c){"object"==typeof exports&&exports&&"object"==typeof module&&module&&module.exports===exports?c(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],c):c(jQuery)}(function(c){function g(b){b=b[0];return 0<b.offsetWidth&&0<b.offsetHeight}function a(b){if(b.minTime&&(b.minTime=m(b.minTime)),b.maxTime&&(b.maxTime=m(b.maxTime)),b.durationTime&&"function"!=typeof b.durationTime&&(b.durationTime=m(b.durationTime)),"now"==b.scrollDefault)b.scrollDefault=function(){return b.roundingFunction(m(new Date),
b)};else if(b.scrollDefault&&"function"!=typeof b.scrollDefault){var e=b.scrollDefault;b.scrollDefault=function(){return b.roundingFunction(m(e),b)}}else b.minTime&&(b.scrollDefault=function(){return b.roundingFunction(b.minTime,b)});if("string"===c.type(b.timeFormat)&&b.timeFormat.match(/[gh]/)&&(b._twelveHourTime=!0),!1===b.showOnFocus&&-1!=b.showOn.indexOf("focus")&&b.showOn.splice(b.showOn.indexOf("focus"),1),0<b.disableTimeRanges.length){for(var f in b.disableTimeRanges)b.disableTimeRanges[f]=
[m(b.disableTimeRanges[f][0]),m(b.disableTimeRanges[f][1])];b.disableTimeRanges=b.disableTimeRanges.sort(function(b,e){return b[0]-e[0]});for(f=b.disableTimeRanges.length-1;0<f;f--)b.disableTimeRanges[f][0]<=b.disableTimeRanges[f-1][1]&&(b.disableTimeRanges[f-1]=[Math.min(b.disableTimeRanges[f][0],b.disableTimeRanges[f-1][0]),Math.max(b.disableTimeRanges[f][1],b.disableTimeRanges[f-1][1])],b.disableTimeRanges.splice(f,1))}return b}function d(b){var e=b.data("timepicker-settings"),f=b.data("timepicker-list");
if(f&&f.length&&(f.remove(),b.data("timepicker-list",!1)),e.useSelect)var h=f=c("<select />",{"class":"ui-timepicker-select"});else f=c("<ul />",{"class":"ui-timepicker-list"}),h=c("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1}),h.css({display:"none",position:"absolute"}).append(f);if(e.noneOption)if(!0===e.noneOption&&(e.noneOption=e.useSelect?"Time...":"None"),c.isArray(e.noneOption))for(var a in e.noneOption){if(parseInt(a,10)==a){var d=l(e.noneOption[a],e.useSelect);f.append(d)}}else d=
l(e.noneOption,e.useSelect),f.append(d);(e.className&&h.addClass(e.className),null===e.minTime&&null===e.durationTime||!e.showDuration)||("function"==typeof e.step?"function":e.step,h.addClass("ui-timepicker-with-duration"),h.addClass("ui-timepicker-step-"+e.step));d=e.minTime;"function"==typeof e.durationTime?d=m(e.durationTime()):null!==e.durationTime&&(d=e.durationTime);a=null!==e.minTime?e.minTime:0;var g=null!==e.maxTime?e.maxTime:a+q-1;a>g&&(g+=q);g===q-1&&"string"===c.type(e.timeFormat)&&e.show2400&&
(g=q);var p=e.disableTimeRanges,k=0,z=p.length,v=e.step;"function"!=typeof v&&(v=function(){return e.step});for(var A=0;g>=a;A++,a+=60*v(A)){var u=a,y=x(u,e);if(e.useSelect)var t=c("<option />",{value:y});else t=c("<li />"),t.addClass(43200>u%86400?"ui-timepicker-am":"ui-timepicker-pm"),t.data("time",86400>=u?u:u%86400);t.text(y);if((null!==e.minTime||null!==e.durationTime)&&e.showDuration)if(y=F(a-d,e.step),e.useSelect)t.text(t.text()+" ("+y+")");else{var E=c("<span />",{"class":"ui-timepicker-duration"});
E.text(" ("+y+")");t.append(E)}z>k&&(u>=p[k][1]&&(k+=1),p[k]&&u>=p[k][0]&&u<p[k][1]&&(e.useSelect?t.prop("disabled",!0):t.addClass("ui-timepicker-disabled")));f.append(t)}(h.data("timepicker-input",b),b.data("timepicker-list",h),e.useSelect)?(b.val()&&f.val(n(m(b.val()),e)),f.on("focus",function(){c(this).data("timepicker-input").trigger("showTimepicker")}),f.on("blur",function(){c(this).data("timepicker-input").trigger("hideTimepicker")}),f.on("change",function(){w(b,c(this).val(),"select")}),w(b,
f.val(),"initial"),b.hide().after(f)):(a=e.appendTo,"string"==typeof a?a=c(a):"function"==typeof a&&(a=a(b)),a.append(h),B(b,f),f.on("mousedown click","li",function(e){b.off("focus.timepicker");b.on("focus.timepicker-ie-hack",function(){b.off("focus.timepicker-ie-hack");b.on("focus.timepicker",r.show)});C(b)||b[0].focus();f.find("li").removeClass("ui-timepicker-selected");c(this).addClass("ui-timepicker-selected");D(b)&&(b.trigger("hideTimepicker"),f.on("mouseup.timepicker click.timepicker","li",
function(b){f.off("mouseup.timepicker click.timepicker");h.hide()}))}))}function l(b,e){var f,h,a;return"object"==typeof b?(f=b.label,h=b.className,a=b.value):"string"==typeof b?f=b:c.error("Invalid noneOption value"),e?c("<option />",{value:a,"class":h,text:f}):c("<li />",{"class":h,text:f}).data("time",String(a))}function n(b,e){return b=e.roundingFunction(b,e),null!==b?x(b,e):void 0}function p(b){b.target!=window&&(b=c(b.target),b.closest(".ui-timepicker-input").length||b.closest(".ui-timepicker-wrapper").length||
(r.hide(),c(document).unbind(".ui-timepicker"),c(window).unbind(".ui-timepicker")))}function C(b){b=b.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&b.disableTouchKeyboard}function z(b,e,f){if(!f&&0!==f)return!1;b=b.data("timepicker-settings");var a=!1;f=b.roundingFunction(f,b);return e.find("li").each(function(b,e){var h=c(e);if("number"==typeof h.data("time"))return h.data("time")==f?(a=h,!1):void 0}),a}function B(b,e){e.find("li").removeClass("ui-timepicker-selected");
var f=m(v(b),b.data("timepicker-settings"));if(null!==f&&(f=z(b,e,f))){var a=f.offset().top-e.offset().top;(a+f.outerHeight()>e.outerHeight()||0>a)&&e.scrollTop(e.scrollTop()+f.position().top-f.outerHeight());f.addClass("ui-timepicker-selected")}}function A(b,e){if(""!==this.value&&"timepicker"!=e){var f=c(this);if(!f.is(":focus")||b&&"change"==b.type){var a=f.data("timepicker-settings"),d=m(this.value,a);if(null===d)return void f.trigger("timeFormatError");var g=!1;null!==a.minTime&&d<a.minTime&&
null!==a.maxTime&&d>a.maxTime&&(g=!0);c.each(a.disableTimeRanges,function(){return d>=this[0]&&d<this[1]?(g=!0,!1):void 0});a.forceRoundTime&&(d=a.roundingFunction(d,a));a=x(d,a);g?w(f,a,"error")&&f.trigger("timeRangeError"):w(f,a)}}}function v(b){return b.is("input")?b.val():b.data("ui-timepicker-value")}function w(b,e,a){if(b.is("input")){b.val(e);var f=b.data("timepicker-settings");f.useSelect&&"select"!=a&&"initial"!=a&&b.data("timepicker-list").val(n(m(e),f))}return b.data("ui-timepicker-value")!=
e?(b.data("ui-timepicker-value",e),"select"==a?b.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):"error"!=a&&b.trigger("changeTime"),!0):(b.trigger("selectTime"),!1)}function G(b){switch(b.keyCode){case 13:case 9:break;default:b.preventDefault()}}function H(b){var a=c(this),f=a.data("timepicker-list");if(!f||!g(f)){if(40!=b.keyCode)return!0;r.show.call(a.get(0));f=a.data("timepicker-list");C(a)||a.focus()}switch(b.keyCode){case 13:return D(a)&&r.hide.apply(this),b.preventDefault(),
!1;case 38:var h=f.find(".ui-timepicker-selected");return h.length?h.is(":first-child")||(h.removeClass("ui-timepicker-selected"),h.prev().addClass("ui-timepicker-selected"),h.prev().position().top<h.outerHeight()&&f.scrollTop(f.scrollTop()-h.outerHeight())):(f.find("li").each(function(b,a){return 0<c(a).position().top?(h=c(a),!1):void 0}),h.addClass("ui-timepicker-selected")),!1;case 40:return h=f.find(".ui-timepicker-selected"),0===h.length?(f.find("li").each(function(b,a){return 0<c(a).position().top?
(h=c(a),!1):void 0}),h.addClass("ui-timepicker-selected")):h.is(":last-child")||(h.removeClass("ui-timepicker-selected"),h.next().addClass("ui-timepicker-selected"),h.next().position().top+2*h.outerHeight()>f.outerHeight()&&f.scrollTop(f.scrollTop()+h.outerHeight())),!1;case 27:f.find("li").removeClass("ui-timepicker-selected");r.hide();break;case 9:r.hide();break;default:return!0}}function I(b){var a=c(this),f=a.data("timepicker-list"),h=a.data("timepicker-settings");if(!f||!g(f)||h.disableTextInput)return!0;
switch(b.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:h.typeaheadHighlight?B(a,f):f.hide()}}function D(b){var a=b.data("timepicker-settings"),f=null,c=b.data("timepicker-list").find(".ui-timepicker-selected");return c.hasClass("ui-timepicker-disabled")?!1:(c.length&&(f=c.data("time")),null!==f&&("string"!=typeof f&&(f=x(f,
a)),w(b,f,"select")),!0)}function F(b,a){b=Math.abs(b);var f,e,c=Math.round(b/60),d=[];return 60>c?d=[c,k.mins]:(f=Math.floor(c/60),e=c%60,30==a&&30==e&&(f+=k.decimal+5),d.push(f),d.push(1==f?k.hr:k.hrs),30!=a&&e&&(d.push(e),d.push(k.mins))),d.join(" ")}function x(b,a){if("number"!=typeof b)return null;var f=parseInt(b%60);var e=parseInt(b/60%60);var d=parseInt(b/3600%24);d=new Date(1970,0,2,d,e,f,0);if(isNaN(d.getTime()))return null;if("function"===c.type(a.timeFormat))return a.timeFormat(d);for(var g=
"",l=0;l<a.timeFormat.length;l++)switch(e=a.timeFormat.charAt(l)){case "a":g+=11<d.getHours()?k.pm:k.am;break;case "A":g+=11<d.getHours()?k.PM:k.AM;break;case "g":e=d.getHours()%12;g+=0===e?"12":e;break;case "G":e=d.getHours();b===q&&(e=a.show2400?24:0);g+=e;break;case "h":e=d.getHours()%12;0!==e&&10>e&&(e="0"+e);g+=0===e?"12":e;break;case "H":e=d.getHours();b===q&&(e=a.show2400?24:0);g+=9<e?e:"0"+e;break;case "i":e=d.getMinutes();g+=9<e?e:"0"+e;break;case "s":f=d.getSeconds();g+=9<f?f:"0"+f;break;
case "\\":l++;g+=a.timeFormat.charAt(l);break;default:g+=e}return g}function m(b,a){if(""===b||null===b)return null;if("object"==typeof b)return 3600*b.getHours()+60*b.getMinutes()+b.getSeconds();if("string"!=typeof b)return b;b=b.toLowerCase().replace(/[\s\.]/g,"");"a"!=b.slice(-1)&&"p"!=b.slice(-1)||(b+="m");var e="("+k.am.replace(".","")+"|"+k.pm.replace(".","")+"|"+k.AM.replace(".","")+"|"+k.PM.replace(".","")+")?",d=b.match(new RegExp("^"+e+"([0-9]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?"+e+
"$"));if(!d)return null;e=parseInt(1*d[2],10);if(24<e){if(a&&!1===a.wrapHours)return null;e%=24}var c=d[1]||d[5],g=e;12>=e&&c&&(g=c==k.pm||c==k.PM,g=12==e?g?12:0:e+(g?12:0));d=3600*g+60*(1*d[3]||0)+(1*d[4]||0);12>e&&!c&&a&&a._twelveHourTime&&a.scrollDefault&&(e=d-a.scrollDefault(),0>e&&e>=q/-2&&(d=(d+q/2)%q));return d}var q=86400,k={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},r={init:function(b){return this.each(function(){var e=c(this),f=[],g;for(g in c.fn.timepicker.defaults)e.data(g)&&
(f[g]=e.data(g));f=c.extend({},c.fn.timepicker.defaults,f,b);if(f.lang&&(k=c.extend(k,f.lang)),f=a(f),e.data("timepicker-settings",f),e.addClass("ui-timepicker-input"),f.useSelect)d(e);else{if(e.prop("autocomplete","off"),f.showOn)for(var l in f.showOn)e.on(f.showOn[l]+".timepicker",r.show);e.on("change.timepicker",A);e.on("keydown.timepicker",H);e.on("keyup.timepicker",I);f.disableTextInput&&e.on("keydown.timepicker",G);A.call(e.get(0))}})},show:function(b){var a=c(this),f=a.data("timepicker-settings");
if(b&&b.preventDefault(),f.useSelect)return void a.data("timepicker-list").focus();C(a)&&a.blur();b=a.data("timepicker-list");if(!a.prop("readonly")&&(b&&0!==b.length&&"function"!=typeof f.durationTime||(d(a),b=a.data("timepicker-list")),!g(b))){a.data("ui-timepicker-value",a.val());B(a,b);r.hide();b.show();var h={};f.orientation.match(/r/)?h.left=a.offset().left+a.outerWidth()-b.outerWidth()+parseInt(b.css("marginLeft").replace("px",""),10):h.left=a.offset().left+parseInt(b.css("marginLeft").replace("px",
""),10);"t"==(f.orientation.match(/t/)?"t":f.orientation.match(/b/)?"b":a.offset().top+a.outerHeight(!0)+b.outerHeight()>c(window).height()+c(window).scrollTop()?"t":"b")?(b.addClass("ui-timepicker-positioned-top"),h.top=a.offset().top-b.outerHeight()+parseInt(b.css("marginTop").replace("px",""),10)):(b.removeClass("ui-timepicker-positioned-top"),h.top=a.offset().top+a.outerHeight()+parseInt(b.css("marginTop").replace("px",""),10));b.offset(h);h=b.find(".ui-timepicker-selected");if(!h.length){var l=
m(v(a));null!==l?h=z(a,b,l):f.scrollDefault&&(h=z(a,b,f.scrollDefault()))}h&&h.length?(h=b.scrollTop()+h.position().top-h.outerHeight(),b.scrollTop(h)):b.scrollTop(0);return f.stopScrollPropagation&&c(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",function(b){b.preventDefault();var a=c(this).scrollTop();c(this).scrollTop(a+b.originalEvent.deltaY)}),c(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",p),c(window).on("resize.ui-timepicker",p),f.closeOnWindowScroll&&c(document).on("scroll.ui-timepicker",
p),a.trigger("showTimepicker"),this}},hide:function(b){b=c(this);var a=b.data("timepicker-settings");return a&&a.useSelect&&b.blur(),c(".ui-timepicker-wrapper").each(function(){var b=c(this);if(g(b)){var a=b.data("timepicker-input"),e=a.data("timepicker-settings");e&&e.selectOnBlur&&D(a);b.hide();a.trigger("hideTimepicker")}}),this},option:function(b,e){return"string"==typeof b&&"undefined"==typeof e?c(this).data("timepicker-settings")[b]:this.each(function(){var f=c(this),g=f.data("timepicker-settings"),
l=f.data("timepicker-list");"object"==typeof b?g=c.extend(g,b):"string"==typeof b&&(g[b]=e);g=a(g);f.data("timepicker-settings",g);l&&(l.remove(),f.data("timepicker-list",!1));g.useSelect&&d(f)})},getSecondsFromMidnight:function(){return m(v(this))},getTime:function(b){var a=v(this);if(!a)return null;a=m(a);if(null===a)return null;b||(b=new Date);b=new Date(b);return b.setHours(a/3600),b.setMinutes(a%3600/60),b.setSeconds(a%60),b.setMilliseconds(0),b},isVisible:function(){var b=this.data("timepicker-list");
return!(!b||!g(b))},setTime:function(b){var a=this.data("timepicker-settings");var d=a.forceRoundTime?n(m(b),a):x(m(b),a);return b&&null===d&&a.noneOption&&(d=b),w(this,d),this.data("timepicker-list")&&B(this,this.data("timepicker-list")),this},remove:function(){if(this.hasClass("ui-timepicker-input")){var a=this.data("timepicker-settings");return this.removeAttr("autocomplete","off"),this.removeClass("ui-timepicker-input"),this.removeData("timepicker-settings"),this.off(".timepicker"),this.data("timepicker-list")&&
this.data("timepicker-list").remove(),a.useSelect&&this.show(),this.removeData("timepicker-list"),this}}};c.fn.timepicker=function(a){return this.length?r[a]?this.hasClass("ui-timepicker-input")?r[a].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof a&&a?void c.error("Method "+a+" does not exist on jQuery.timepicker"):r.init.apply(this,arguments):this};c.fn.timepicker.defaults={appendTo:"body",className:null,closeOnWindowScroll:!1,disableTextInput:!1,disableTimeRanges:[],disableTouchKeyboard:!1,
durationTime:null,forceRoundTime:!1,maxTime:null,minTime:null,noneOption:!1,orientation:"l",roundingFunction:function(a,d){if(null===a)return null;if("number"!=typeof d.step)return a;var b=a%(60*d.step);return b>=30*d.step?a+=60*d.step-b:a-=b,a==q&&d.show2400?a:a%q},scrollDefault:null,selectOnBlur:!1,show2400:!1,showDuration:!1,showOn:["click","focus"],showOnFocus:!0,step:30,stopScrollPropagation:!1,timeFormat:"g:ia",typeaheadHighlight:!0,useSelect:!1,wrapHours:!0}});var v_oNewResConn=null;
$(document).ready(function(){CalendarInit($("#datepicker"),DaySelect);$("body").on("click",".adm-dayevents-tools-newbt",function(c){ClearContent(c)&&CreateEvent($("#datepicker").datepicker("getDate"))});$("body").on("click",".seltimebt",function(c){var g=$(this).parent(".timeinput"),a=$(this);c.preventDefault();a.is(".wait")||g.find("input[type=text]").timepicker({timeFormat:"H:i",scrollDefault:"now"}).on("hideTimepicker",function(){$(this).timepicker("remove");a.addClass("wait");setTimeout(function(){a.removeClass("wait")},
400)}).on("showTimepicker",function(){$(".ui-timepicker-wrapper").css({left:$(this).position().left-4})}).timepicker("show")});$("body").on("click",".adm-dayevents-view .event:not(.selected)",function(c){ClearContent(c)&&OpenEvent($(this).attr("pk"))});$("body").on("click",".ajaxsubmit",function(c){ProcessGeneralAjaxSubmit($(this),c)});$("body").on("click",".adm-newregconn-conn .new_registration",function(){var c=$(this);OpenRegistration($(this).attr("pk"),$(this).attr("courpk"),$(this).attr("date"),
function(){c.mouseover()})});$("body").on("mouseover",".adm-newregconn-conn .new_registration",function(){$(this).css({background:"rgba(220,250,255,1)"});$('.adm-dayevents-view .event[pk="'+$(this).attr("courpk")+'"]').addClass("selhover");$('.registrationconn .registration[pk="'+$(this).attr("pk")+'"] .header').addClass("selhover")});$("body").on("mouseleave",".adm-newregconn-conn .new_registration",function(){$(this).css({background:"rgb(245, 245, 100)"});$('.adm-dayevents-view .event[pk="'+$(this).attr("courpk")+
'"]').removeClass("selhover");$('.registrationconn .registration[pk="'+$(this).attr("pk")+'"] .header').removeClass("selhover")});$("body").on("mouseenter",".adm-dayevents-view .event",function(){$(this).addClass("selhover");$('.adm-newregconn-conn .new_registration[courpk="'+$(this).attr("pk")+'"]').css({background:"rgba(220,250,255,1)"})});$("body").on("mouseleave",".adm-dayevents-view .event",function(){$(this).removeClass("selhover");$('.adm-newregconn-conn .new_registration[courpk="'+$(this).attr("pk")+
'"]').css({background:"rgb(245, 245, 100)"})});$("body").on("mouseenter",".registrationconn .registration .header",function(){$(this).addClass("selhover");$('.adm-newregconn-conn .new_registration[pk="'+$(this).closest(".registration").attr("pk")+'"]').css({background:"rgba(220,250,255,1)"})});$("body").on("mouseleave",".registrationconn .registration .header",function(){$(this).removeClass("selhover");$('.adm-newregconn-conn .new_registration[pk="'+$(this).closest(".registration").attr("pk")+'"]').css({background:"rgb(245, 245, 100)"})});
GetNavigation();GetNewRegistrations()});function DaySelect(c,g,a){ClearContent();c.datepicker("setDate",g);$(".daydate").text(g);LoadEventsOnDay(g,a)}
function LoadEventsOnDay(c,g){SendAjaxRequest("type=SelectDay&date="+c,!0,function(a){$(".adm-dayevents-view").empty();var d="";$(a).find("event_html")?$(a).find("event_html").each(function(){d='<div class="event" pk="'+$(this).attr("pk")+'" state="'+$(this).attr("state")+'">'+$(this).html()+"</div>";$(d).appendTo(".adm-dayevents-view")}):(d='<div class="adm-dayevents-view-nodata">\u017d\u00e1dn\u00e1 data</div>',$(d).appendTo(".adm-dayevents-view"));"function"==typeof g&&g()})}
function ClearContent(c){var g=!0;0<$(".adm-day-conn .checkbeforeclose").length&&(g=confirm("P\u0159ejete si opravdu opustit neulo\u017een\u00fd formul\u00e1\u0159 ?"));g?($(".adm-day-conn").empty(),SelectFromOverview("0")):c&&c.stopPropagation();return g}
function GetNavigation(){SendAjaxRequest("type=GetNavigation",!0,function(c){var g=$(c).find("actday").text();DaySelect($("#datepicker"),g,function(){var a=$(c).find("openevent > object_response"),d=$(c).find("openpage");0<a.length?(a=new Event($(".adm-day-conn"),$(c).find("openevent > object_response")),a.ProcessState()):0<d.length&&new ResponsivePage($(".adm-day-conn"),d.html())})})}
function ReloadData(c){var g=$("#datepicker").datepicker("getDate"),a=g.getFullYear(),d=g.getMonth();RequestCalendarhData(!0,new Date(a,d-1,1),new Date(a,d+1,1),function(){DaySelect($("#datepicker"),DateToStr(g),c)})}
function ProcessGeneralAjaxSubmit(c,g,a){g.stopPropagation();g.preventDefault();g=c.closest("form");a=c.attr("data");SendAjaxRequest("type="+c.attr("ajaxtype")+(g?"&"+g.serialize():"")+(a?"&"+a:""),!0,function(a){$(a).find("general_response").find("actions action").each(function(){switch($(this).text()){case "NewResponsivePage":new ResponsivePage($(".adm-day-conn"),$(a).find("general_response pagedata").html())}})})}var CalendarDataXML="";
function CalendarInit(c,g,a){$.datepicker.regional.cs={closeText:"Cerrar",prevText:"<",nextText:">",currentText:"Hoy",monthNames:"Leden \u00danor B\u0159ezen Duben Kv\u011bten \u010cerven \u010cervenec Srpen Z\u00e1\u0159\u00ed \u0158\u00edjen Listopad Prosinec".split(" "),monthNamesShort:"Leden \u00danor B\u0159ezen Duben Kv\u011bten \u010cerven \u010cervenec Srpen Z\u00e1\u0159\u00ed \u0158\u00edjen Listopad Prosinec".split(" "),dayNames:"Ned\u011ble Pond\u011bl\u00ed \u00dater\u00fd St\u0159eda \u010ctvrtek P\u00e1tek Sobota".split(" "),
dayNamesShort:"Ne Po \u00dat St \u010ct P\u00e1 So".split(" "),dayNamesMin:"Ne Po \u00dat St \u010ct P\u00e1 So".split(" "),weekHeader:"Sm",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!0,showMonthAfterYear:!1,yearSuffix:"",showOtherMonths:!0,selectOtherMonths:!0,numberOfMonths:1,changeMonth:!0,changeYear:!0,showButtonPanel:!1};$.datepicker.setDefaults($.datepicker.regional.cs);var d=new Date,l=d.getMonth(),n=new Date(d.getFullYear(),l-1,1);d=new Date(d.getFullYear(),l+2,0);RequestCalendarhData(!1,n,d);
c.datepicker({afterShow:function(a,d,c){$(this).find(".ui-datepicker-title").append('<button class="today">Dnes</button>');AfterLoadDays($(this),CalendarDataXML)},onSelect:function(a){"function"===typeof g&&g($(this),a)},onChangeMonthYear:function(d,c){RequestCalendarhData(!1,new Date(d,c-2,1),new Date(d,c+1,1),function(){"function"===typeof a&&a(d,c)})}}).on("click","button.today",function(){g(c,DateToStr(new Date))})}
function AfterLoadDays(c,g){c.find("table td").each(function(){var a=parseInt($(this).find("*").text()),d=parseInt($(this).attr("data-month")),c=parseInt($(this).attr("data-year"));a=new Date(c,d,a);var n=$(g).find('day[date="'+DateToStr(a)+'"]');d='<div class="ondaydata">';if(0<n.length){c=parseInt(n.find('event[state="open"]').size());var p=parseInt(n.find('event[state="hidden"]').size());n=parseInt(n.find('event[state="full"]').size());0<c&&(d=d+'<div class="open-event-color">'+c+"</div>");0<n&&
(d=d+'<div class="full-event-color">'+n+"</div>");0<p&&(d=d+'<div class="hidden-event-color">'+p+"</div>")}d+="</div>";0<$('.adm-newregconn .new_registration[date="'+DateToStr(a)+'"]').length&&$(this).css({backgroundColor:"rgb(250,250,0)"}).addClass("hasnew");$(d).appendTo($(this))})}function RequestCalendarhData(c,g,a,d){SendAjaxRequest("type=GetCalendarData&fromdate="+DateToStr(g)+"&todate="+DateToStr(a),c,function(a){CalendarDataXML=$(a).html();"function"==typeof d&&d(a)})}
function CreateEvent(c,g){SendAjaxRequest("type=CreateEvent&date="+DateToStr(c),!0,function(a){ClearContent()&&(new Event($(".adm-day-conn"),$(a).find("> object_response"))).ProcessState()})}function OpenEvent(c,g){SendAjaxRequest("type=OpenEvent&pk="+c,!0,function(a){ClearContent()&&(a=new Event($(".adm-day-conn"),$(a).find("> object_response")),a.ProcessState(),"function"==typeof g&&g(a))})}
function DeleteEvent(){SendAjaxRequest("type=DeleteEvent",!0,function(c){0<$(c).find("error").length?(new Event($(".adm-day-conn"),$(c).find("> object_response"))).ProcessState():(ClearContent(),ReloadData())})}function CloseEvent(){ClearContent()&&SendAjaxRequest("type=CloseEvent",!0,function(c){})}function SelectFromOverview(c){$(".adm-dayevents-view .event").removeClass("selected");$(".adm-dayevents-view .event[pk="+c+"]").addClass("selected")}
var Event=function(c,g){this.i_oObjResponse=g;this.i_oParent=c;this.i_oHTMLObj=null;this.i_sPK="";this.i_aRegistrations=[];this.ProcessState=function(){var a=this;this.i_aRegistrations=[];this.i_sPK=this.i_oObjResponse.find("> primary_key").text();"1"===this.i_oObjResponse.attr("reload")?(this.i_oObjResponse.attr("reload","0"),ReloadData(function(){a.ProcessState()})):(this.i_oObjResponse.find("> actions action").each(function(){switch($(this).text()){case "Close":a.Close();break;case "ShowHtml":a.ShowHTML();
break;case "CantAddNew":CreateConfirm(a.i_oHTMLObj.find(".registarationcaption"),"warning","Nen\u00ed mo\u017en\u00e9 p\u0159id\u00e1vat dal\u0161\u00ed registrace, kapacita byla napln\u011bna.",[{submit:!1,message:"ok"}]);break;case "InitNewForm":case "InitEditForm":case "InitOverViewActions":a.InitBaseAjaxSubmit()}}),a.i_oObjResponse.find("> registrations > registration").each(function(){a.AddRegistration($(this).find("> object_response"))}),this.ProcessRegistrations())};this.ShowHTML=function(){null!==
this.i_oHTMLObj&&this.i_oHTMLObj.remove();var a=this;this.i_oHTMLObj=$(this.i_oObjResponse.find("> showhtml").html()).appendTo(this.i_oParent);this.i_oObjResponse.find("> invaliddata > input").each(function(){HighlightInvalInput($(this).attr("name"),$(this).attr("message"),a.i_oHTMLObj)});SelectFromOverview(this.i_sPK)};this.SendAjax=function(a,d){var c=this;SendAjaxRequest("type=EventAjax&EventAjaxType="+a+(""!==d?"&"+d:""),!0,function(a){c.i_oObjResponse=$(a).find("> object_response");c.ProcessState()})};
this.Close=function(){CloseEvent()};this.InitBaseAjaxSubmit=function(){var a=this;this.i_oHTMLObj.on("click",".ajaxsubmit",function(d){d.stopPropagation();d.preventDefault();if("delete"===$(this).attr("ajaxtype"))CreateDeleteConfirm(a.i_oHTMLObj.find(".caption").eq(0),"Opravdu si p\u0159ejete vymazat ud\u00e1lost?",DeleteEvent);else{d=a.i_oHTMLObj.find("form");var c=$(this).attr("data");a.SendAjax($(this).attr("ajaxtype"),(d?"&"+d.serialize():"")+(c?"&"+c:""))}})};this.DeleteRegistration=function(a){for(var d=
0;d<this.i_aRegistrations.length;d++)if(this.i_aRegistrations[d].i_sPK===a){var c=this,g=this.i_aRegistrations[d];g.InitDeleteForm(function(){g.i_oHTMLObj.slideUp(200,function(){c.SendAjax("deletegistration","RegistrationPK="+g.i_sPK)})});break}};this.AddRegistration=function(a){a=new Registration(this,a);this.i_aRegistrations.push(a)};this.ProcessRegistrations=function(){for(var a=0;a<this.i_aRegistrations.length;a++)this.i_aRegistrations[a].ProcessState()};this.GetRegistrationByPK=function(a){for(var d=
0;d<this.i_aRegistrations.length;d++)if(this.i_aRegistrations[d].i_sPK==a)return this.i_aRegistrations[d];return null}};
function GetNewRegistrations(){var c=$(".adm-newregconn");SendAjaxRequest("type=GetNewRegistrations",!0,function(g){var a=0;$(g).find("registration").each(function(d){var g=BuildRegistrationObj($(this));c.find('.new_registration[pk="'+g.attr("pk")+'"]')&&(a++,g.css({background:"rgb(245,245,100)"}).hide(),g.appendTo(c.find(".adm-newregconn-conn")),setTimeout(function(){g.toggle("slide",{direction:"right"})},150+70*d),d=GetCalenDayTDByDate(StrToDate($(this).attr("courdate")),":not(hasnew)"),null!=d&&
d.animate({backgroundColor:"rgb(250,250,0)"},300,"swing",function(){$(this).addClass("hasnew")}))});$(".newregcount").text(a)})}
function BuildRegistrationObj(c){var g='<div class="new_registration" pk="'+c.attr("pk")+'" courpk="'+c.attr("courpk")+'" date="'+c.attr("courdate")+'">';g+='<div class="term">'+c.attr("courdatetime")+"</div><table><tr><td>Jm\u00e9no:</td><td>"+c.attr("firstname")+" "+c.attr("lastname")+"</td></tr><tr><td>Kurz:</td><td>"+c.attr("language")+" - "+c.attr("courname")+'</td></tr></table><div class="created"><span>Vytvo\u0159eno:</span><span>'+c.attr("created")+"</span></div></div>";return $(g)}
function GetCalenDayTDByDate(c,g){var a=null;$("#datepicker").find('table tbody td[data-month="'+c.getMonth()+'"][data-year="'+c.getFullYear()+'"]'+g).each(function(){$(this).find("a").text()==c.getDate()&&(a=$(this))});return a}function OpenRegistration(c,g,a,d){var l=function(){OpenEvent(g,function(a){a.GetRegistrationByPK(c).OpenDetail(250,d)})},n=$("#datepicker");n.datepicker("getDate")!=StrToDate(a)?DaySelect(n,a,l):l()}
var v_aOpenRegStatus=[],Registration=function(c,g){this.i_oObjResponse=g;this.i_oParentEvent=c;this.i_oHTMLObj=null;this.i_sPK="";this.i_bClosed=!0;this.i_bIsNew=!1;this.ProcessState=function(){this.i_oHTMLObj=null;var a=this;a.i_sPK=a.i_oObjResponse.find("primary_key").text();a.i_bClosed="0"===a.i_oObjResponse.find("isopendetail").text();this.i_oObjResponse.find("> actions action").each(function(){switch($(this).text()){case "Close":a.Close();break;case "ShowHtml":a.ShowHTML();break;case "InitNewForm":case "InitEditForm":case "InitOverViewActions":a.InitBaseAjaxSubmit()}})};
this.ShowHTML=function(){var a=this;this.i_oParentEvent.i_oHTMLObj&&(this.i_oHTMLObj=$(this.i_oObjResponse.find("> showhtml").html()).appendTo(this.i_oParentEvent.i_oHTMLObj.find(".registrationconn")),this.i_oObjResponse.find("> invaliddata > input").each(function(){HighlightInvalInput($(this).attr("name"),$(this).attr("message"),a.i_oHTMLObj)}),this.i_oHTMLObj.attr("pk",this.i_sPK),"1"==this.i_oHTMLObj.attr("isnew")&&(this.i_bIsNew=!0,this.i_oHTMLObj.find(".header").append('<div class="newtag">nov\u00e1</div>')));
if(this.i_oHTMLObj.hasClass("noclose"))v_aOpenRegStatus[this.i_sPK]="open";else{this.i_bClosed||(v_aOpenRegStatus[this.i_sPK]="open");var d=v_aOpenRegStatus[this.i_sPK];"closed"===d||"open"!==d?(this.i_bClosed=!0,this.CloseDetail(0)):this.i_bClosed=!1;this.i_oHTMLObj.find(".header").click(function(){a.i_bClosed?a.OpenDetail():a.CloseDetail()})}};this.InitBaseAjaxSubmit=function(){var a=this;this.i_oHTMLObj.on("click",".ajaxsubmit",function(d){d.stopPropagation();d.preventDefault();if("delete"===$(this).attr("ajaxtype"))a.i_oParentEvent.DeleteRegistration(a.i_sPK);
else{d=a.i_oHTMLObj.find("form");var c=$(this).attr("data");a.SendAjax($(this).attr("ajaxtype"),(d?d.serialize():"")+(c?"&"+c:""))}})};this.Close=function(){null!==this.i_oHTMLObj&&this.i_oHTMLObj.remove()};this.SendAjax=function(a,c){this.i_oParentEvent.SendAjax("RegistrationAjax","RegistrationAxajType="+a+"&RegistrationPK="+this.i_sPK+(""!==c?"&"+c:""))};this.InitDeleteForm=function(a){CreateDeleteConfirm(this.i_oHTMLObj.find(".header"),"Opravdu si p\u0159ejete vymazat registraci?",a)};this.ReadNewRegistration=
function(a){var c=this;setTimeout(function(){c.i_oHTMLObj.find(".newtag").fadeOut(500,function(){c.SendAjax("readnew")});var a=$(".adm-newregconn-conn .new_registration[pk="+c.i_sPK+"]");a.slideUp(500,function(){a.remove();$(".newregcount").text($(".adm-newregconn-conn .new_registration").size());0==$('.adm-newregconn-conn .new_registration[date="'+a.attr("date")+'"]').size()&&GetCalenDayTDByDate(StrToDate(a.attr("date")),".hasnew").animate({backgroundColor:"rgb(255,255,255)"},300,"swing",function(){$(this).removeClass("hasnew")})})},
1E3);"function"==typeof a&&a()};this.OpenDetail=function(a,c){a=void 0===a?250:a;var d=this;this.i_oHTMLObj.find(".content").slideDown(a,function(){d.i_bClosed=!1;v_aOpenRegStatus[d.i_sPK]="open";d.i_bIsNew?d.ReadNewRegistration(c):"function"==typeof c&&c()})};this.CloseDetail=function(a,c){a=void 0===a?250:a;var d=this;this.i_oHTMLObj.find(".content").slideUp(a,function(){d.i_bClosed=!0;v_aOpenRegStatus[d.i_sPK]="closed";"function"==typeof c&&c()})}},ResponsivePage=function(c,g){this.i_oParent=c;
this.i_oHmltObj=null;this.ProcessPageResponse=function(a){var c=$("<elem>"+a+"</elem>").find("page_response"),g=this;"1"===c.attr("reload")?(c.attr("reload","0"),ReloadData(function(){g.ProcessPageResponse()})):c.find("> actions action").each(function(){switch($(this).text()){case "Close":g.Close();break;case "ShowHtml":g.ShowHTML(c.find("showhtml").html()),c.find("> invaliddata > input").each(function(){HighlightInvalInput($(this).attr("name"),$(this).attr("message"),g.i_oHTMLObj)})}})};this.ShowHTML=
function(a){ClearContent()&&(this.i_oHTMLObj=$(a).appendTo(this.i_oParent),this.InitBaseAjaxSubmit())};this.Close=function(){ClearContent()&&this.SendAjax("Close","",function(){})};this.SendAjax=function(a,c,g){var d=this;SendAjaxRequest("type=RespPageAjax&RespPageAjaxType="+a+(""!==c?c:""),!0,function(a){d.ProcessPageResponse(a);"function"===typeof g&&g()})};this.InitBaseAjaxSubmit=function(){var a=this;this.i_oHTMLObj.on("click",".ajaxsubmit",function(c){c.stopPropagation();c.preventDefault();c=
$(this).closest("form");var d=$(this).attr("data");a.SendAjax($(this).attr("ajaxtype"),(c?"&"+c.serialize():"")+(d?"&"+d:""))})};this.ProcessPageResponse(g)};